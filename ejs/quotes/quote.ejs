<div class="ui floating message quote">
  <div class="header top field">
      <%@ __this.publisher %>
      <div class="mini ui buttons quote ratio">
        <button class="ui button negative dislike">-</button>
          <div class="or value" data-text="<%@ __this.ratio %>"></div>
        <button class="ui button positive like">+</button>
      </div>
  </div>
  <div class="date"><%@ __this.date %></div>
  <div class="ui center aligned segment text">
    <%@ __this.quote %>
  </div>
</div>


<%
__this.Defer(function()
{
  __this.first().find('.ratio .button').click(function()
  {
    var delta = $(this).hasClass('positive') ? 1 : -1;
    var id = __this.id


    phoxy.ApiRequest(['ratio/vote', id, delta], function(r)
    {
      __this.first().find('.ratio .value').attr('data-text', r.data.vote);
    })
  })
})
%>