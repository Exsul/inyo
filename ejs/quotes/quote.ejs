<div class="ui violet message quote">
  <div class="publish date">
    <%@ __this.date %>
  </div>
  <div class="publisher">
  <%@ __this.publisher %>
  </div>
  <div class="text">
    <%@ __this.quote %>
  </div>
  <div class="ui buttons quote ratio">
    <button class="ui mini positive button">+</button>
      <div class="or" data-text="<%@ __this.ratio %>"></div>
    <button class="ui mini negative button">-</button>
  </div>
</div>




<%
__this.Defer(function()
{
  __this.first().find('.ui.mini.negative.button').click(function()
  {
    var id= __this.id

    phoxy.ApiRequest(['main/minus_ratio', id], function(r)
    {
      $(".main.minus_ratio").trigger("update",[r.data.ratio]);
    })
  })
})
%>

<%
__this.Defer(function()
{
  __this.first().find('.ui.mini.positive.button').click(function()
  {
    var id=__this.id

    phoxy.ApiRequest(['main/plus_ratio', id], function(r)
    {
      $(".main.ratio").trigger("update",[r.data.ratio]);
    })
  })
})
%>